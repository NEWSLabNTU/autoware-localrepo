version: 1

# Docker configuration
docker:
  # Always prefer remote URLs to avoid maintaining Dockerfiles locally
  dockerfile: Dockerfile

  # Optional: Custom image name for caching
  image_name: autoware-1.5.0-jp62-builder

  # Cross-compilation target platform (required for building arm64 on amd64 host)
  platform: linux/arm64

# Output configuration with descriptive name
output:
  directory: ./build

# Package configurations with descriptive name
packages:
  directory: ./debian-overrides

# Build options
build:
  ros_distro: humble
  # Use low parallel jobs for QEMU emulation to avoid OOM/segfaults during linking
  # Native ARM64 builds can use higher values (e.g., 8)
  parallel_jobs: 2
  skip_tests: true
  # Custom installation prefix for Autoware 1.5.0
  install_prefix: /opt/autoware/1.5.0
  # Package name suffix - appended to package names (e.g., ros-humble-pkg-1-5-0)
  package_suffix: "1-5-0"
